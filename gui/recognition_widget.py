# gui/recognition_widget.py
"""
–ú–æ–¥—É–ª—å –≤–∏–¥–∂–µ—Ç–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
–ê–≤—Ç–æ—Ä: –°—Ç—É–¥–µ–Ω—Ç 4 –∫—É—Ä—Å–∞ –û–º–ì–£ –∏–º. –§.–ú. –î–æ—Å—Ç–æ–µ–≤—Å–∫–æ–≥–æ
–í–ö–†: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü

–û–ø–∏—Å–∞–Ω–∏–µ:
–í–∏–¥–∂–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
—Å —Å–∏—Å—Ç–µ–º–æ–π –±–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É
–≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ —Å –∫–∞–º–µ—Ä—ã –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤–µ–±-–∫–∞–º–µ—Ä—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- –°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∞—É–¥–∏—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ, —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è —Å–æ–±—ã—Ç–∏—è–º–∏, —á–µ—Ä–µ–∑ tkinter.after()
- –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–∞–º–µ—Ä—ã
"""

import tkinter as tk  # –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
from tkinter import messagebox  # –î–∏–∞–ª–æ–≥–æ–≤—ã–µ –æ–∫–Ω–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
from PIL import Image, ImageTk  # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ tkinter
import datetime  # –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞–¥–µ—Ä–∂–µ–∫
import os  # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
import cv2  # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞
from config.settings import *


class FaceRecognitionWidget:
    """
    –í–∏–¥–∂–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
    
    –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–æ–º –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º –ª–∏—Ü.
    –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤ —Å–µ–±–µ:
    - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π (–∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
    - –û–±—Ä–∞–±–æ—Ç–∫—É –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
    - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
    - –ö–æ–Ω—Ç—Ä–æ–ª—å —á–∞—Å—Ç–æ—Ç—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (–∑–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π)
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    
    –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
    - –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ tkinter.after()
    - –°–∏—Å—Ç–µ–º–∞ —Ç–∞–π–º–µ—Ä–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∞—É–¥–∏—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∫–∞–º–µ—Ä—ã
    """
    
    def __init__(self, parent_notebook, camera_manager, face_engine, db):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            parent_notebook (ttk.Notebook): –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∫–ª–∞–¥–æ–∫
            camera_manager (CameraController): –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ–±-–∫–∞–º–µ—Ä–æ–π
            face_engine (FaceAnalysisEngine): –î–≤–∏–∂–æ–∫ –∞–Ω–∞–ª–∏–∑–∞ –ª–∏—Ü
            db (DatabaseManager): –ú–µ–Ω–µ–¥–∂–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        """
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã
        self.notebook = parent_notebook  # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∫–ª–∞–¥–æ–∫ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞
        self.camera_manager = camera_manager  # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤–µ–±-–∫–∞–º–µ—Ä—ã
        self.face_engine = face_engine  # –î–≤–∏–∂–æ–∫ –∞–Ω–∞–ª–∏–∑–∞ –ª–∏—Ü
        self.db = db  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        
        # –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è —á–∞—Å—Ç–æ—Ç—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ)
        # –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤
        self.last_successful_recognition_timestamp = None  # –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
        self.last_unknown_face_detection_timestamp = None  # –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –¥–µ—Ç–µ–∫—Ü–∏–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ª–∏—Ü–∞
        self.user_info_display_timer = None  # –¢–∞–π–º–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        
        # –ü–æ—Å—Ç–∞–≤—â–∏–∫ —Å–∏—Å—Ç–µ–º—ã –∞—É–¥–∏—Ç–∞ (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
        self.audit_logger_provider = None
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        self.initialize_user_interface()
    
    def set_audit_logger(self, audit_provider_function):
        """
        –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∞—É–¥–∏—Ç–∞ —á–µ—Ä–µ–∑ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        
        –≠—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–∂–µ—Ç—É –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ –∞—É–¥–∏—Ç–∞
        –±–µ–∑ –∂–µ—Å—Ç–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —á—Ç–æ —É–ª—É—á—à–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∫–æ–¥–∞.
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            audit_provider_function (callable): –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —ç–∫–∑–µ–º–ø–ª—è—Ä –ª–æ–≥–≥–µ—Ä–∞ –∞—É–¥–∏—Ç–∞
        """
        self.audit_logger_provider = audit_provider_function
    
    def initialize_user_interface(self):
        """
        –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤–∏–¥–∂–µ—Ç–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
        
        –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π:
        1. –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ —Å –∫–∞–º–µ—Ä—ã –∏ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        2. –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        """
        # –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–∞ –≤–∫–ª–∞–¥–∫–∏ —Å —Ñ–∏—Ä–º–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º
        self.frame = tk.Frame(self.notebook, bg=THEME_COLOR)
        self.notebook.add(self.frame, text="  üé• –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü  ")
        
        # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ –¥–ª—è —ç—Å—Ç–µ—Ç–∏—á–Ω–æ–≥–æ –≤–∏–¥–∞
        main_container = tk.Frame(self.frame, bg=THEME_COLOR)
        main_container.pack(fill="both", expand=True, padx=20, pady=20)
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –¥–≤—É—Ö–ø–∞–Ω–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        self.create_camera_panel(main_container)  # –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –∫–∞–º–µ—Ä–∞
        self.create_info_panel(main_container)    # –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    
    def create_camera_panel(self, parent):
        """
        –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞
        
        –ü–∞–Ω–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç:
        - –û–±–ª–∞—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ (480x360 –ø–∏–∫—Å–µ–ª–µ–π)
        - –ö–Ω–æ–ø–∫–∏ –∑–∞–ø—É—Å–∫–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞–º–µ—Ä—ã
        - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Å–µ–∫—Ü–∏–∏
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            parent (tk.Widget): –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –ø–∞–Ω–µ–ª–∏
        """
        # –°–æ–∑–¥–∞–Ω–∏–µ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω–æ–π
        left_panel = tk.Frame(parent, bg="white", relief="raised", bd=2, width=500)
        left_panel.pack(side="left", fill="y", padx=(0, 10))
        left_panel.pack_propagate(False)  # –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
        
        # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–∞–Ω–µ–ª–∏ —Å —Ñ–∏—Ä–º–µ–Ω–Ω—ã–º —Å—Ç–∏–ª–µ–º
        video_header = tk.Frame(left_panel, bg="#7C3AED", height=40)
        video_header.pack(fill="x")
        video_header.pack_propagate(False)
        
        video_title = tk.Label(video_header, text="–ö–ê–ú–ï–†–ê", 
                              font=("Arial", 12, "bold"), bg="#7C3AED", fg="white")
        video_title.pack(expand=True)
        
        # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞
        # –†–∞–∑–º–µ—Ä 480x360 –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω 4:3 –¥–ª—è –≤–µ–±-–∫–∞–º–µ—Ä
        video_container = tk.Frame(left_panel, bg="black", width=480, height=360)
        video_container.pack(padx=10, pady=10)
        video_container.pack_propagate(False)
        
        # –ú–µ—Ç–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–¥—Ä–æ–≤ –≤–∏–¥–µ–æ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
        self.video_label = tk.Label(video_container, text="–ö–∞–º–µ—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞", 
                                   bg="black", fg="white", font=("Arial", 12))
        self.video_label.pack(fill="both", expand=True)
        
        # –ü–∞–Ω–µ–ª—å –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π
        self.create_camera_controls(left_panel)
    
    def create_camera_controls(self, parent):
        """
        –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–∞–º–µ—Ä—ã
        
        –ö–Ω–æ–ø–∫–∏:
        - "–ó–∞–ø—É—Å–∫": –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∑–∞—Ö–≤–∞—Ç –≤–∏–¥–µ–æ —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã
        - "–°—Ç–æ–ø": –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –∫–∞–º–µ—Ä—ã
        
        –ö–Ω–æ–ø–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è/—Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–º–µ—Ä—ã
        –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            parent (tk.Widget): –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫
        """
        # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π
        controls = tk.Frame(parent, bg="white", height=50)
        controls.pack(fill="x", padx=10, pady=(0, 10))
        controls.pack_propagate(False)
        
        # –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∫–∞–º–µ—Ä—ã (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∞–∫—Ç–∏–≤–Ω–∞)
        self.start_button = tk.Button(controls, text="–ó–∞–ø—É—Å–∫", 
                                     font=("Arial", 10, "bold"), bg="#10B981", fg="white",
                                     relief="flat", padx=GUI_BUTTON_PADDING_X, pady=GUI_BUTTON_PADDING_Y, 
                                     command=self.start_camera)
        self.start_button.pack(side="left", padx=(0, 5))
        
        # –ö–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞–º–µ—Ä—ã (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞)
        self.stop_button = tk.Button(controls, text="–°—Ç–æ–ø", 
                                    font=("Arial", 10, "bold"), bg="#EF4444", fg="white",
                                    relief="flat", padx=GUI_BUTTON_PADDING_X, pady=GUI_BUTTON_PADDING_Y, 
                                    command=self.stop_camera, state="disabled")
        self.stop_button.pack(side="left", padx=(0, 5))
    
    def create_info_panel(self, parent):
        """
        –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        
        –ü–∞–Ω–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç:
        - –°—Ç–∞—Ç—É—Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
        - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        - –û–±–ª–∞—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            parent (tk.Widget): –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–∞–Ω–µ–ª–∏
        """
        # –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        right_panel = tk.Frame(parent, bg="white", relief="raised", bd=2)
        right_panel.pack(side="right", fill="both", expand=True)
        
        info_content = tk.Frame(right_panel, bg="white")
        info_content.pack(fill="both", expand=True, padx=15, pady=15)
        
        # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏
        header = tk.Label(info_content, text="–†–ê–°–ü–û–ó–ù–ê–ù–ù–´–ô –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨", 
                         font=("Arial", 14, "bold"), bg="white", fg="#374151")
        header.pack(anchor="w", pady=(0, 15))
        
        # –°—Ç–∞—Ç—É—Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
        self.status_label = tk.Label(info_content, text="‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ...", 
                                    font=("Arial", 16, "bold"), bg="white", fg="#6B7280")
        self.status_label.pack(anchor="w", pady=(0, 15))
        
        # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        self.create_user_info_section(info_content)
        
        # –°–µ–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
        self.create_photo_display_section(info_content)
    
    def create_user_info_section(self, parent):
        """
        –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        
        –í–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—è:
        - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            parent (tk.Widget): –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        """
        # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å —Ä–∞–º–∫–æ–π
        info_container = tk.Frame(parent, bg="#F9FAFB", relief="solid", bd=1)
        info_container.pack(fill="x", pady=(0, 15))
        
        # –ü–æ–ª–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        id_frame = tk.Frame(info_container, bg="#F9FAFB")
        id_frame.pack(fill="x", padx=GUI_CARD_PADDING, pady=8)
        
        tk.Label(id_frame, text="ID:", font=("Arial", 11, "bold"), 
                bg="#F9FAFB", fg="#374151").pack(side="left")
        self.user_id_label = tk.Label(id_frame, text="‚Äî", font=("Arial", 11), 
                                     bg="#F9FAFB", fg="#6B7280")
        self.user_id_label.pack(side="right")
        
        # –ü–æ–ª–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        name_frame = tk.Frame(info_container, bg="#F9FAFB")
        name_frame.pack(fill="x", padx=GUI_CARD_PADDING, pady=8)
        
        tk.Label(name_frame, text="–ò–º—è:", font=("Arial", 11, "bold"), 
                bg="#F9FAFB", fg="#374151").pack(side="left")
        self.name_label = tk.Label(name_frame, text="‚Äî", font=("Arial", 11), 
                                  bg="#F9FAFB", fg="#6B7280")
        self.name_label.pack(side="right")
    
    def create_photo_display_section(self, parent):
        """
        –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            parent (tk.Widget): –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        """
        photo_frame = tk.Frame(parent, bg="white")
        photo_frame.pack(fill="x")
        
        tk.Label(photo_frame, text="–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è:", font=("Arial", 11, "bold"), 
                bg="white", fg="#374151").pack(anchor="w", pady=(0, 8))
        
        # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º
        photo_container = tk.Frame(photo_frame, bg="#F3F4F6", relief="solid", bd=1, 
                                  width=USER_PHOTO_DISPLAY_SIZE[0], height=USER_PHOTO_DISPLAY_SIZE[1])
        photo_container.pack(pady=(0, 10))
        photo_container.pack_propagate(False)
        
        self.photo_display = tk.Label(photo_container, text="–ù–µ—Ç —Ñ–æ—Ç–æ", 
                                     bg="#F3F4F6", font=("Arial", 10), fg="#6B7280")
        self.photo_display.pack(fill="both", expand=True)
    
    def start_camera(self):
        """
        –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –≤–∏–¥–µ–æ–∑–∞—Ö–≤–∞—Ç–∞ –∏ –Ω–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–¥—Ä–æ–≤
        
        –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –∑–∞–ø—É—Å–∫–∞:
        1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–º–µ—Ä—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∫–∞–º–µ—Ä—ã
        2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ —Å–∏—Å—Ç–µ–º—É –∞—É–¥–∏—Ç–∞
        4. –ó–∞–ø—É—Å–∫ —Ü–∏–∫–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–¥—Ä–æ–≤
        
        –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∫–∞–º–µ—Ä–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.
        """
        # –ü–æ–ø—ã—Ç–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–º–µ—Ä—ã
        if self.camera_manager.start_camera():
            # –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫ - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            self.start_button.config(state="disabled")  # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ –∑–∞–ø—É—Å–∫–∞
            self.stop_button.config(state="normal")     # –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
            
            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∫–∞–º–µ—Ä—ã –≤ —Å–∏—Å—Ç–µ–º—É –∞—É–¥–∏—Ç–∞
            audit = self.audit_logger_provider() if self.audit_logger_provider else None
            if audit:
                audit.log_system_security_event("camera_start", "success")
            
            # –ó–∞–ø—É—Å–∫ —Ü–∏–∫–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ–∫–∞–¥—Ä–æ–≤
            self.process_video_frame()
        else:
            # –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            audit = self.audit_logger_provider() if self.audit_logger_provider else None
            if audit:
                audit.log_system_security_event("camera_start", "failed")
            
            # –ü–æ–∫–∞–∑ –¥–∏–∞–ª–æ–≥–æ–≤–æ–≥–æ –æ–∫–Ω–∞ —Å –æ—à–∏–±–∫–æ–π
            messagebox.showerror("–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∫–∞–º–µ—Ä–µ!")
    
    def stop_camera(self):
        """
        –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–º–µ—Ä—ã –∏ —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        
        –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –æ—á–∏—Å—Ç–∫—É:
        1. –û—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞—Ö–≤–∞—Ç–∞ –≤–∏–¥–µ–æ
        2. –û—Ç–º–µ–Ω—É –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–∞–π–º–µ—Ä–æ–≤
        3. –°–±—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
        4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
        """
        # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–º–µ—Ä—ã
        self.camera_manager.stop_camera()
        
        # –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–∞–π–º–µ—Ä–æ–≤
        if self.user_info_display_timer:
            self.frame.after_cancel(self.user_info_display_timer)
            self.user_info_display_timer = None
        
        # –°–±—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ —Å–∏—Å—Ç–µ–º—ã –∑–∞—â–∏—Ç—ã –æ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
        self.last_successful_recognition_timestamp = None
        self.last_unknown_face_detection_timestamp = None
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫
        self.start_button.config(state="normal")
        self.stop_button.config(state="disabled")
        
        # –°–±—Ä–æ—Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        self.video_label.config(image="", text="–ö–∞–º–µ—Ä–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞")
        self.clear_user_display_info()
        
        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞–º–µ—Ä—ã
        audit = self.audit_logger_provider() if self.audit_logger_provider else None
        if audit:
            audit.log_system_security_event("camera_stop", "success")
    
    def process_video_frame(self):
        """
        –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ–∫–∞–¥—Ä–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
        
        –¶–∏–∫–ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ –ø–æ–∫–∞ –∫–∞–º–µ—Ä–∞ –∞–∫—Ç–∏–≤–Ω–∞ –∏ –≤–∫–ª—é—á–∞–µ—Ç:
        1. –ó–∞—Ö–≤–∞—Ç –∫–∞–¥—Ä–∞ —Å –∫–∞–º–µ—Ä—ã
        2. –ê–Ω–∞–ª–∏–∑ –ª–∏—Ü –Ω–∞ –∫–∞–¥—Ä–µ —Å –ø–æ–º–æ—â—å—é –¥–≤–∏–∂–∫–∞ –ª–∏—Ü
        3. –ü—Ä–æ–≤–µ—Ä–∫—É –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–∑–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π)
        4. –û—Ç—Ä–∏—Å–æ–≤–∫—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –≤–æ–∫—Ä—É–≥ –ª–∏—Ü
        5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        6. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
        
        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –ø–æ–¥—Ö–æ–¥ —á–µ—Ä–µ–∑ tkinter.after() –¥–ª—è
        –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
        """
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–∞–º–µ—Ä—ã
        if not self.camera_manager.is_camera_active():
            return  # –í—ã—Ö–æ–¥ –∏–∑ —Ü–∏–∫–ª–∞ –µ—Å–ª–∏ –∫–∞–º–µ—Ä–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
        
        # –ó–∞—Ö–≤–∞—Ç –∫–∞–¥—Ä–∞ —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã
        frame = self.camera_manager.capture_frame()
        if frame is None:
            # –ö–∞–¥—Ä –Ω–µ –ø–æ–ª—É—á–µ–Ω - –ø–ª–∞–Ω–∏—Ä—É–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—É—é –ø–æ–ø—ã—Ç–∫—É
            self.frame.after(VIDEO_FRAME_PROCESSING_INTERVAL, self.process_video_frame)
            return
        
        # –ê–Ω–∞–ª–∏–∑ –ª–∏—Ü –Ω–∞ —Ç–µ–∫—É—â–µ–º –∫–∞–¥—Ä–µ
        recognized_faces = self.face_engine.detect_and_recognize_faces(frame, FRAME_SCALE)
        
        # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —á–∞—Å—Ç–æ—Ç—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
        current_time = datetime.datetime.now()
        recognized_user = None  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
        can_recognize_known = self._is_known_user_cooldown_expired(current_time)
        can_recognize_unknown = self._is_unknown_user_cooldown_expired(current_time)
        
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –ª–∏—Ü–∞ –Ω–∞ –∫–∞–¥—Ä–µ
        for face_info in recognized_faces:
            # –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–∏—Ü–∞ —Å —É—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
            name, color = self._analyze_detected_face(face_info, current_time, 
                                                     can_recognize_known, can_recognize_unknown)
            
            # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ –≤–æ–∫—Ä—É–≥ –ª–∏—Ü–∞ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ü–≤–µ—Ç–æ–º
            self.face_engine.draw_detection_rectangle(frame, face_info, color, name)
            
            # –ï—Å–ª–∏ –ª–∏—Ü–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ –∏ –ø—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ - –æ–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            if face_info['is_known'] and can_recognize_known:
                user_data = self.db.get_user_by_id(face_info['user_id'])
                if user_data:
                    recognized_user = user_data
                    self.last_successful_recognition_timestamp = current_time
                    self._schedule_user_info_reset()  # –ü–ª–∞–Ω–∏—Ä—É–µ–º –æ—á–∏—Å—Ç–∫—É —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏
        if recognized_user:
            self.display_recognized_user_info(recognized_user)
        elif not recognized_faces and not self.user_info_display_timer:
            # –ï—Å–ª–∏ –ª–∏—Ü –Ω–µ—Ç –∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ - –æ—á–∏—â–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            self.clear_user_display_info()
        
        # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ –∫–∞–¥—Ä–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
        self._render_video_frame(frame)
        
        # –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
        self.frame.after(VIDEO_FRAME_PROCESSING_INTERVAL, self.process_video_frame)
    
    def _is_known_user_cooldown_expired(self, current_time):
        """
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞ –æ–∂–∏–¥–∞–Ω–∏—è –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        
        –ó–∞—â–∏—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–æ—Ç–∏–≤ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ
        –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç
        –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ RECOGNITION_DELAY —Å–µ–∫—É–Ω–¥.
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            current_time (datetime): –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
            
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
            bool: True –µ—Å–ª–∏ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ, False –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å
        """
        if not self.last_successful_recognition_timestamp:
            return True  # –ü–µ—Ä–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ
        
        # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ—à–µ–¥—à–µ–≥–æ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
        elapsed_seconds = (current_time - self.last_successful_recognition_timestamp).total_seconds()
        return elapsed_seconds >= RECOGNITION_DELAY
    
    def _is_unknown_user_cooldown_expired(self, current_time):
        """
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞ –æ–∂–∏–¥–∞–Ω–∏—è –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ª–∏—Ü
        
        –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –∑–∞—â–∏—Ç—ã –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ª–∏—Ü —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º
        –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –æ–∂–∏–¥–∞–Ω–∏—è –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º—É.
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            current_time (datetime): –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
            
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
            bool: True –µ—Å–ª–∏ –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ
        """
        if not self.last_unknown_face_detection_timestamp:
            return True  # –ü–µ—Ä–≤–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∞
        
        elapsed_seconds = (current_time - self.last_unknown_face_detection_timestamp).total_seconds()
        return elapsed_seconds >= UNKNOWN_FACE_DELAY
    
    def _analyze_detected_face(self, face_info, current_time, can_recognize_known, can_recognize_unknown):
        """
        –ê–Ω–∞–ª–∏–∑ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –ª–∏—Ü–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
        
        –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã –∏ –ø–æ–¥–ø–∏—Å–µ–π:
        1. –ò–∑–≤–µ—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ + —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ ‚Üí –∑–µ–ª–µ–Ω–∞—è —Ä–∞–º–∫–∞ + –∏–º—è + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        2. –ò–∑–≤–µ—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ + –æ–∂–∏–¥–∞–Ω–∏–µ ‚Üí –∂–µ–ª—Ç–∞—è —Ä–∞–º–∫–∞ + —Ç–∞–π–º–µ—Ä
        3. –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ + —Ä–∞–∑—Ä–µ—à–µ–Ω–æ ‚Üí –∫—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        4. –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ + –æ–∂–∏–¥–∞–Ω–∏–µ ‚Üí –∂–µ–ª—Ç–∞—è —Ä–∞–º–∫–∞ + —Ç–∞–π–º–µ—Ä
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            face_info (dict): –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—Ü–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
            current_time (datetime): –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
            can_recognize_known (bool): –†–∞–∑—Ä–µ—à–µ–Ω–æ –ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ª–∏—Ü
            can_recognize_unknown (bool): –†–∞–∑—Ä–µ—à–µ–Ω–æ –ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ª–∏—Ü
            
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
            tuple: (–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–ª—è_–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ü–≤–µ—Ç_—Ä–∞–º–∫–∏_BGR)
        """
        # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º—É –∞—É–¥–∏—Ç–∞ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        audit = self.audit_logger_provider() if self.audit_logger_provider else None
        
        if face_info['is_known']:
            # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if can_recognize_known:
                # –†–∞–∑—Ä–µ—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
                if audit:
                    audit.log_face_recognition_attempt(face_info['user_id'], True, face_info['confidence'])
                
                # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
                user_data = self.db.get_user_by_id(face_info['user_id'])
                name = user_data[2] if user_data else "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"
                color = (0, 255, 0)  # –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç —Ä–∞–º–∫–∏ (—Ñ–æ—Ä–º–∞—Ç BGR)
            else:
                # –ü–µ—Ä–∏–æ–¥ –æ–∂–∏–¥–∞–Ω–∏—è - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
                time_left = RECOGNITION_DELAY - (current_time - self.last_successful_recognition_timestamp).total_seconds()
                name = f"{time_left:.1f}—Å"  # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
                color = (0, 255, 255)  # –ñ–µ–ª—Ç—ã–π —Ü–≤–µ—Ç —Ä–∞–º–∫–∏
        else:
            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ª–∏—Ü–∞
            if can_recognize_unknown:
                # –†–∞–∑—Ä–µ—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –Ω–µ—É–¥–∞—á–Ω—É—é –ø–æ–ø—ã—Ç–∫—É
                if audit:
                    audit.log_face_recognition_attempt(None, False, face_info['confidence'])
                
                # –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –¥–µ—Ç–µ–∫—Ü–∏–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ª–∏—Ü–∞
                self.last_unknown_face_detection_timestamp = current_time
                name = ""  # –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ª–∏—Ü
                color = (0, 0, 255)  # –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç —Ä–∞–º–∫–∏
            else:
                # –ü–µ—Ä–∏–æ–¥ –æ–∂–∏–¥–∞–Ω–∏—è –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ª–∏—Ü
                time_left = UNKNOWN_FACE_DELAY - (current_time - self.last_unknown_face_detection_timestamp).total_seconds()
                name = f"{time_left:.1f}—Å"
                color = (0, 255, 255)  # –ñ–µ–ª—Ç—ã–π —Ü–≤–µ—Ç —Ä–∞–º–∫–∏
        
        return name, color
    
    def _schedule_user_info_reset(self):
        """
        –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        
        –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–∞–π–º–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.
        """
        if self.user_info_display_timer:
            self.frame.after_cancel(self.user_info_display_timer)
        
        self.user_info_display_timer = self.frame.after(
            USER_INFO_AUTO_CLEAR_DELAY, 
            self.clear_user_display_info
        )
    
    def _render_video_frame(self, frame):
        """
        –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ–∫–∞–¥—Ä–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
        
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∫–∞–¥—Ä OpenCV –≤ —Ñ–æ—Ä–º–∞—Ç tkinter –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤ –º–µ—Ç–∫–µ.
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            frame (numpy.ndarray): –í–∏–¥–µ–æ–∫–∞–¥—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ BGR
        """
        # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è BGR ‚Üí RGB –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤
        rgb_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è PIL
        pil_image = Image.fromarray(rgb_frame)
        
        # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç tkinter
        photo = ImageTk.PhotoImage(pil_image)
        
        # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –º–µ—Ç–∫–µ
        self.video_label.config(image=photo, text="")
        self.video_label.image = photo  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞
    
    def display_recognized_user_info(self, user_data):
        """
        –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        
        –û–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:
        - –°—Ç–∞—Ç—É—Å —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π
        - ID –∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
        - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        
        –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
            user_data (tuple): –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        """
        user_id = user_data[1]
        name = user_data[2]
        photo_path = user_data[3]
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π
        current_time = datetime.datetime.now().strftime('%H:%M:%S')
        self.status_label.config(text=f"‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–Ω –≤ {current_time}", fg="#10B981")
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
        self.user_id_label.config(text=user_id)
        self.name_label.config(text=name)
        
        # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if photo_path and os.path.exists(photo_path):
            try:
                # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
                pil_image = Image.open(photo_path)
                pil_image = pil_image.resize(USER_PHOTO_DISPLAY_SIZE, Image.Resampling.LANCZOS)
                photo = ImageTk.PhotoImage(pil_image)
                
                # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
                self.photo_display.config(image=photo, text="")
                self.photo_display.image = photo
                
            except Exception as e:
                print(f"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")
                self.photo_display.config(image="", text="–û—à–∏–±–∫–∞\n–∑–∞–≥—Ä—É–∑–∫–∏", 
                                        font=("Arial", 9), fg="#EF4444")
        else:
            # –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
            self.photo_display.config(image="", text="–§–æ—Ç–æ\n–Ω–µ –Ω–∞–π–¥–µ–Ω–æ", 
                                    font=("Arial", 9), fg="#6B7280")
    
    def clear_user_display_info(self):
        """
        –û—á–∏—Å—Ç–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        
        –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è.
        """
        # –°–±—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–∞
        self.status_label.config(text="‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ...", fg="#6B7280")
        
        # –°–±—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
        self.user_id_label.config(text="‚Äî")
        self.name_label.config(text="‚Äî")
        
        # –°–±—Ä–æ—Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
        self.photo_display.config(image="", text="–ù–µ—Ç —Ñ–æ—Ç–æ", 
                                 font=("Arial", 10), fg="#6B7280")
        
        # –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞
        if self.user_info_display_timer:
            self.user_info_display_timer = None